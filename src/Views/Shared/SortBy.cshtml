@model QueryFilter

@{
    var sortByEnumType = typeof(SortByOption);
}

<div class="form-group">
    <div class="left">
        @if (Model.DisplayAsMap){
            <a href="@Url.Action("Index", "Results", RoutingUtil.Combine(Model.ToRouteValues(), new { display = "list" }))"
            class="view-list-link">View as a list</a>
        } else if (Model.LocationFilterActive()) {
            <a href="@Url.Action("Index", "Results", RoutingUtil.Combine(Model.ToRouteValues(), new { display = "map" }))"
            class="view-map-link">View on a map</a>
        }
    </div>
    <div class="right">
        <form action='@Url.Action("SortBy", "Results", Model.ToRouteValues())' method="POST">
            <label class="form-label sortedby-label" for="sortby">Sorted by</label>
            <select class="form-control trigger-result-update sortby-selector"
                    onchange="this.form.submit()"
                    aria-label="Sort by"
                    role="listbox"
                    name="sortby"
                    id="sortby">
                @foreach(SortByOption option in Model.ValidSortings)
                {
                    if (option == Model.SortBy) {
                        <option value="@((int) option)" selected>@option.FormattedName()</option>
                    }
                    else {
                        <option value="@((int) option)">@option.FormattedName()</option>
                    }
                }
            </select>
            <noscript>
                <input class="button" type="submit" value="Update" aria-label="Update sort order"/>
            </noscript>
        </form>
    </div>
</div>